@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap');

:root {
    /* Solarized Dark Palette (RGB Components for Opacity Support) */
    --rgb-base03: 0, 43, 54;
    --rgb-base02: 7, 54, 66;
    --rgb-base01: 88, 110, 117;
    --rgb-base00: 101, 123, 131;
    --rgb-base0: 131, 148, 150;
    --rgb-base1: 147, 161, 161;
    --rgb-base2: 238, 232, 213;
    --rgb-base1: 147, 161, 161;
    --rgb-base2: 238, 232, 213;
    --rgb-base3: 253, 246, 227;

    --rgb-suggest: 181, 137, 0;
    /* Solarized Yellow */

    --base03: rgb(var(--rgb-base03));
    --base02: rgb(var(--rgb-base02));
    --base01: rgb(var(--rgb-base01));
    --base00: rgb(var(--rgb-base00));
    --base0: rgb(var(--rgb-base0));
    --base1: rgb(var(--rgb-base1));
    --base2: rgb(var(--rgb-base2));
    --base3: rgb(var(--rgb-base3));

    --rgb-yellow: 181, 137, 0;
    --rgb-orange: 203, 75, 22;
    --rgb-red: 220, 50, 47;
    --rgb-magenta: 211, 54, 130;
    --rgb-violet: 108, 113, 196;
    --rgb-blue: 38, 139, 210;
    --rgb-cyan: 42, 161, 152;
    --rgb-green: 133, 153, 0;

    --yellow: rgb(var(--rgb-yellow));
    --orange: rgb(var(--rgb-orange));
    --red: rgb(var(--rgb-red));
    --magenta: rgb(var(--rgb-magenta));
    --violet: rgb(var(--rgb-violet));
    --blue: rgb(var(--rgb-blue));
    --cyan: rgb(var(--rgb-cyan));
    --green: rgb(var(--rgb-green));

    /* Semantics - Defined in body for dynamic theming */

    /* Typography */
    --font-main: 'Inter', sans-serif;

    /* Quasar Brand Overrides (Defaults) */
    --q-primary: var(--blue);
    --q-secondary: var(--magenta);
    --q-accent: var(--violet);
    --q-positive: var(--green);
    --q-negative: var(--red);
    --q-info: var(--cyan);
    --q-warning: var(--yellow);
}

/* --- THEME DEFINITIONS --- */

/* Light Mode (Default) */
body {
    /* Rebase: background=base3, text=base00 */
    --rgb-bg: var(--rgb-base3);
    --rgb-surface: var(--rgb-base2);

    --color-bg: var(--base3);
    --color-surface: var(--base2);

    --color-primary: var(--blue);
    --color-secondary: var(--magenta);

    /* Content */
    --color-text-main: var(--base00);
    /* Primary Content */
    --color-text-muted: var(--base1);
    /* Comments/Secondary */
    --color-text-header: var(--base01);
    /* Headers */

    --color-border: rgba(var(--rgb-base1), 0.2);

    /* Glassmorphism (Light) */
    --glass-bg: rgba(var(--rgb-base2), 0.6);
    --glass-border: 1px solid rgba(var(--rgb-base1), 0.1);
    --glass-shadow: 0 4px 30px rgba(var(--rgb-base1), 0.1);
    --backdrop-blur: 10px;

    /* Status Colors */
    --color-error: var(--red);
    --color-warning: var(--orange);
    /* Orange is better visible on light than yellow */
    --color-success: var(--green);
    --color-info: var(--blue);
    --color-suggest: var(--yellow);
    --color-debug: var(--base1);
    --color-bg-nuclear: var(--base3);

    --color-white: var(--base3);
    /* Paper white */
    --color-black: var(--base03);

    /* Categories */
    --color-cat-image: var(--violet);
    --color-cat-video: var(--magenta);
    --color-cat-document: var(--blue);
    --color-cat-audio: var(--cyan);
    --color-cat-other: var(--base1);

    --color-folder: var(--yellow);
    --color-file: var(--base00);

    /* Quasar Overrides */
    --q-dark: var(--base3);
    /* In light mode, 'dark' brand color is actually light bg? No, q-dark is for dark mode bg usually. */
}

/* Dark Mode Override */
body.body--dark {
    /* Rebase: background=base03, text=base0 */
    --rgb-bg: var(--rgb-base03);
    --rgb-surface: var(--rgb-base02);

    --color-bg: var(--base03);
    --color-surface: var(--base02);

    /* Content */
    --color-text-main: var(--base0);
    /* Primary Content */
    --color-text-muted: var(--base01);
    /* Comments/Secondary */
    --color-text-header: var(--base1);
    /* Headers */

    --color-border: rgba(var(--rgb-base1), 0.2);

    /* Glassmoprphism (Dark) */
    --glass-bg: rgba(var(--rgb-base02), 0.7);
    --glass-border: 1px solid rgba(var(--rgb-base1), 0.1);
    --glass-shadow: 0 4px 30px rgba(var(--rgb-base1), 0.15);

    /* Status Colors */
    --color-warning: var(--yellow);
    /* Yellow works well on dark */
    --color-suggest: var(--yellow);
    --color-debug: var(--base01);
    --color-bg-nuclear: var(--base03);

    --color-file: var(--base0);

    --q-dark: var(--base03);
}

body {
    background-color: var(--color-bg);
    color: var(--color-text-main);
    font-family: var(--font-main);
}

/* Utility Classes - Dynamic */
.premium-glass {
    background: var(--glass-bg);
    backdrop-filter: blur(var(--backdrop-blur));
    -webkit-backdrop-filter: blur(var(--backdrop-blur));
    border: var(--glass-border);
    box-shadow: var(--glass-shadow);
}

.text-gradient {
    background: linear-gradient(to right, var(--blue), var(--cyan));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.soft-shadow {
    box-shadow: 0 10px 15px -3px rgba(var(--rgb-base1), 0.12), 0 4px 6px -2px rgba(var(--rgb-base1), 0.08);
}

.thin-border {
    border: 1px solid var(--color-border);
}

/* --- Advanced Atoms Styles --- */

/* Chevron Shapes */
/* Chevron Shapes: [first> >middle> >last] */
.btn-chevron-first {
    clip-path: polygon(0% 0%, calc(100% - 15px) 0%, 100% 50%, calc(100% - 15px) 100%, 0% 100%);
    padding-right: 20px !important;
}

.btn-chevron {
    clip-path: polygon(0% 0%, calc(100% - 15px) 0%, 100% 50%, calc(100% - 15px) 100%, 0% 100%, 15px 50%);
    padding-left: 20px !important;
    padding-right: 20px !important;
}

.btn-chevron-last {
    clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%, 15px 50%);
    padding-left: 20px !important;
}

/* Nuclear Button Border Animation with Conic Gradient */
@keyframes nuclear-border-grow {
    from {
        --nuclear-angle: 0deg;
    }

    to {
        --nuclear-angle: 360deg;
    }
}

.nuclear-btn {
    position: relative;
    --nuclear-angle: 0deg;
}

.nuclear-btn::before {
    content: '';
    position: absolute;
    inset: -4px;
    border-radius: inherit;
    padding: 4px;
    background: conic-gradient(from -90deg,
            var(--color-error) 0deg,
            var(--color-error) var(--nuclear-angle),
            transparent var(--nuclear-angle),
            transparent 360deg);
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    mask-composite: exclude;
    opacity: 0;
    transition: opacity 0.2s ease;
    pointer-events: none;
}

.nuclear-btn.nuclear-active::before {
    opacity: 1;
    animation: nuclear-border-grow 2s linear forwards;
}

@property --nuclear-angle {
    syntax: '<angle>';
    inherits: false;
    initial-value: 0deg;
}

.nuclear-btn:hover {
    box-shadow: 0 0 15px var(--color-error);
}

/* --- Semantic Utility Classes --- */
/* Ensure Quasar Cards are transparent so our utility classes can control background */
.q-card {
    background-color: transparent !important;
}

/* Premium glass cards need their translucent background */
.q-card.premium-glass {
    background-color: var(--glass-bg) !important;
}

.bg-surface-half {
    background-color: rgba(var(--rgb-surface), 0.5);
}

.bg-bg {
    --tw-bg-opacity: 1;
    background-color: rgba(var(--rgb-bg), var(--tw-bg-opacity)) !important;
}

.bg-surface {
    --tw-bg-opacity: 1;
    background-color: rgba(var(--rgb-surface), var(--tw-bg-opacity)) !important;
}

.bg-error {
    --tw-bg-opacity: 1;
    background-color: rgba(var(--rgb-red), var(--tw-bg-opacity)) !important;
}

.bg-nuclear {
    --tw-bg-opacity: 1;
    background-color: rgba(var(--rgb-bg), var(--tw-bg-opacity)) !important;
}

.text-bg {
    color: var(--color-bg) !important;
}

.text-on-accent {
    color: var(--color-bg) !important;
}

.text-error {
    color: var(--color-error);
}

.text-success {
    color: var(--color-success);
}

.text-success {
    color: var(--color-success);
}

.text-suggest {
    color: var(--color-suggest);
}

.text-main {
    color: var(--color-text-main);
}

.text-muted {
    color: var(--color-text-muted);
}

.border-error-half {
    border-color: rgba(var(--rgb-red), 0.5);
}

.border-main {
    border-color: var(--color-border);
}

.z-50 {
    z-index: 50;
}

/* --- Specialized Component Styles --- */
.nuclear-tooltip {
    background-color: var(--color-error) !important;
    color: var(--color-white) !important;
}

.category-badge-base {
    border: 1px solid currentColor;
}

.file-row-hover:hover {
    background-color: rgba(var(--rgb-surface), 0.5);
}

.file-tree-grid {
    display: grid;
    gap: 1rem;
    align-items: center;
}



/* More Utilities */
.bg-border {
    background-color: var(--color-border);
}

.bg-primary {
    background-color: var(--color-primary);
}

.bg-secondary {
    background-color: var(--color-secondary);
}

/* Semantic Button Colors (Design Token Hierarchy) */
.btn-primary {
    background-color: var(--color-primary) !important;
}

.btn-primary-text {
    color: var(--color-primary) !important;
}

.btn-secondary {
    background-color: var(--color-secondary) !important;
}

.btn-secondary-text {
    color: var(--color-secondary) !important;
}

.btn-warning {
    background-color: var(--color-warning) !important;
}

.btn-warning-text {
    color: var(--color-warning) !important;
}

.btn-info {
    background-color: var(--color-info) !important;
}

.btn-info-text {
    color: var(--color-info) !important;
}

.btn-success {
    background-color: var(--color-success) !important;
}

.btn-success-text {
    color: var(--color-success) !important;
}

.btn-error {
    background-color: var(--color-error) !important;
}

.btn-error-text {
    color: var(--color-error) !important;
}

.btn-debug {
    background-color: var(--color-debug) !important;
}

.btn-debug-text {
    color: var(--color-debug) !important;
}

.btn-suggest {
    background-color: var(--color-suggest) !important;
}

.btn-suggest-text {
    color: var(--color-suggest) !important;
}

/* Ensure Ghost Button Text Colors Apply to Content (Override Global Reset) */
.btn-primary-text .q-btn__content,
.btn-primary-text .q-icon {
    color: var(--color-primary) !important;
}

.btn-secondary-text .q-btn__content,
.btn-secondary-text .q-icon {
    color: var(--color-secondary) !important;
}

.btn-warning-text .q-btn__content,
.btn-warning-text .q-icon {
    color: var(--color-warning) !important;
}

.btn-info-text .q-btn__content,
.btn-info-text .q-icon {
    color: var(--color-info) !important;
}

.btn-success-text .q-btn__content,
.btn-success-text .q-icon {
    color: var(--color-success) !important;
}

.btn-error-text .q-btn__content,
.btn-error-text .q-icon {
    color: var(--color-error) !important;
}

.btn-debug-text .q-btn__content,
.btn-debug-text .q-icon {
    color: var(--color-debug) !important;
}

.btn-suggest-text .q-btn__content,
.btn-suggest-text .q-icon {
    color: var(--color-suggest) !important;
}

.text-accent {
    color: var(--color-info);
}

.text-primary {
    color: var(--color-primary);
}

.text-secondary {
    color: var(--color-secondary);
}

.text-cat-image {
    color: var(--color-cat-image);
}

.text-cat-video {
    color: var(--color-cat-video);
}

.text-cat-doc {
    color: var(--color-cat-document);
}

.text-cat-audio {
    color: var(--color-cat-audio);
}

.text-cat-other {
    color: var(--color-cat-other);
}

.bg-muted {
    background-color: var(--color-text-muted);
}

.text-white {
    color: var(--color-white) !important;
}

.border-current {
    border-color: currentColor;
}

/* Category Colors */
.text-grey {
    color: var(--color-text-muted);
}

.bg-grey {
    --tw-bg-opacity: 1;
    background-color: rgba(var(--rgb-text-muted), var(--tw-bg-opacity)) !important;
}

.bg-grey-light {
    background-color: rgba(var(--rgb-text-muted), 0.15);
}

.text-cyan {
    color: var(--cyan);
}

.bg-cyan-light {
    background-color: rgba(var(--rgb-cyan), 0.15);
}

.text-green {
    color: var(--green);
}

.bg-green-light {
    background-color: rgba(var(--rgb-green), 0.15);
}

.text-yellow {
    color: var(--yellow);
}

.bg-yellow-light {
    background-color: rgba(var(--rgb-yellow), 0.15);
}

.text-orange {
    color: var(--orange);
}

.bg-orange-light {
    background-color: rgba(var(--rgb-orange), 0.15);
}

.text-red {
    color: var(--red);
}

.bg-red-light {
    background-color: rgba(var(--rgb-red), 0.15);
}

.text-magenta {
    color: var(--magenta);
}

.bg-magenta-light {
    background-color: rgba(var(--rgb-magenta), 0.15);
}

.text-purple {
    color: var(--violet);
}

.bg-purple-light {
    background-color: rgba(var(--rgb-violet), 0.15);
}

.text-blue {
    color: var(--blue);
}

.bg-blue-light {
    background-color: rgba(var(--rgb-blue), 0.15);
}

/* Additional background colors for buttons */
.bg-orange {
    --tw-bg-opacity: 1;
    background-color: rgba(var(--rgb-orange), var(--tw-bg-opacity)) !important;
}

.bg-cyan {
    --tw-bg-opacity: 1;
    background-color: rgba(var(--rgb-cyan), var(--tw-bg-opacity)) !important;
}

.bg-green {
    --tw-bg-opacity: 1;
    background-color: rgba(var(--rgb-green), var(--tw-bg-opacity)) !important;
}

.bg-red {
    --tw-bg-opacity: 1;
    background-color: rgba(var(--rgb-red), var(--tw-bg-opacity)) !important;
}

/* --- Framework Component Overrides (100% Theme Coverage) --- */

/* Quasar Component Basics */
/* We use :where to keep specificity low on defaults, allowing our utilities to win easier */
:where(.q-card, .nicegui-card, .nicegui-error-popup) {
    background-color: var(--color-surface) !important;
    background: var(--color-surface) !important;
    color: var(--color-text-main) !important;
}

/* If a card has an explicit background utility, the utility must WIN. */
/* We use a high specificity selector to ensure this. */
body [class*="bg-"].q-card,
body [class*="bg-"].nicegui-card {
    background-color: transparent !important;
    background: transparent !important;
}

/* Global Text & Icon Standardizations */
body,
.q-app,
.q-body,
#q-app,
.q-page-container,
.q-page {
    background-color: var(--color-bg) !important;
    color: var(--color-text-main) !important;
}

/* Force all text that might be Quasar-defaulted to black or white */
.text-white,
[class*="text-white"],
.q-btn__content,
.q-icon,
.q-tree__node-header-content,
.q-item__section,
.text-black,
[class*="text-black"] {
    color: var(--color-text-main) !important;
}

/* Standardizing the "White" to Solarized Base2/Base3 for high-contrast labels */
.text-white-bright {
    color: var(--color-white) !important;
}

/* Contrast Text for Buttons */
.text-bg,
.text-on-accent {
    color: var(--color-bg) !important;
}

/* Light Text for Contrast on Bright Accents (Buttons, Badges) */
.bg-primary .q-btn__content,
.bg-secondary .q-btn__content,
.bg-nuclear .q-btn__content,
.bg-error .q-btn__content,
.bg-warning .q-btn__content,
.bg-info .q-btn__content,
.bg-success .q-btn__content,
.bg-positive .q-btn__content,
.bg-negative .q-btn__content,
.bg-pink .q-btn__content,
.bg-purple .q-btn__content,
.bg-deep-purple .q-btn__content,
.bg-indigo .q-btn__content,
.btn-primary .q-btn__content,
.btn-secondary .q-btn__content,
.btn-info .q-btn__content,
.btn-success .q-btn__content,
.btn-positive .q-btn__content,
.btn-negative .q-btn__content,
.btn-error .q-btn__content,
.btn-warning .q-btn__content,
.btn-debug .q-btn__content,
.bg-primary .q-icon,
.bg-secondary .q-icon,
.bg-pink .q-icon,
.bg-purple .q-icon,
.bg-deep-purple .q-icon,
.bg-indigo .q-icon,
.bg-positive .q-icon,
.bg-negative .q-icon,
.bg-warning .q-icon,
.bg-info .q-icon,
.bg-error .q-icon,
.bg-success .q-icon,
.q-btn.bg-primary .q-icon,
.q-btn.bg-secondary .q-icon,
.btn-primary .q-icon,
.btn-secondary .q-icon,
.btn-info .q-icon,
.btn-success .q-icon,
.btn-positive .q-icon,
.btn-negative .q-icon,
.btn-error .q-icon,
.btn-warning .q-icon,
.btn-debug .q-icon,
.btn-suggest .q-btn__content,
.btn-suggest .q-icon {
    color: var(--color-white) !important;
}

/* Input & Field Standardization */
.q-field__native,
.q-field__input,
.q-field__prefix,
.q-field__suffix,
.q-placeholder,
.q-field__marginal {
    color: var(--color-text-main) !important;
}

.q-field__label {
    color: var(--color-text-muted) !important;
}

.q-field--standout .q-field__control {
    background: rgba(var(--rgb-surface), 0.3) !important;
}

/* Search bar specific background (target inner control) */
.q-field.bg-bg.bg-opacity-20 .q-field__control {
    background: rgba(var(--rgb-bg), 0.2) !important;
}

/* Remove Quasar's default hover/focus shadows and backgrounds */
.q-field--standout .q-field__control:hover,
.q-field--standout .q-field__control:focus,
.q-field--standout.q-field--focused .q-field__control,
.q-field--standout.q-field--highlighted .q-field__control {
    box-shadow: none !important;
    background: rgba(var(--rgb-surface), 0.5) !important;
}

/* Focused state for themed fields */
.q-field.bg-bg.bg-opacity-20.q-field--focused .q-field__control,
.q-field.bg-bg.bg-opacity-20.q-field--highlighted .q-field__control {
    background: rgba(var(--rgb-bg), 0.3) !important;
    box-shadow: none !important;
}

/* Remove any outer field shadows */
.q-field--standout:hover,
.q-field--standout.q-field--focused {
    box-shadow: none !important;
}

/* Tree & List Standardization */
.q-tree {
    color: var(--color-text-main) !important;
}

/* Selection & Hover in Lists */
.q-tree__node--selected,
.q-manual-focusable--focused {
    background-color: rgba(var(--rgb-surface), 0.5) !important;
}

/* UI Details (Scrollbars, Sliders, etc.) */
.q-scrollarea__thumb {
    background: var(--color-text-muted) !important;
    opacity: 0.5;
}

.q-slider__text {
    background: transparent !important;
    color: var(--color-text-main) !important;
}

.q-slider__track {
    background: rgba(var(--rgb-text-muted), 0.3) !important;
}

.q-slider__selection {
    background: var(--color-primary) !important;
}

.q-slider__thumb {
    background: var(--color-primary) !important;
    border-radius: 50% !important;
}

/* Border Enforcements */
* {
    border-color: var(--color-border) !important;
}

/* Ensure no pure white/black leaks through inline styles */
[style*="background-color: rgb(255, 255, 255)"],
[style*="background-color: #ffffff"],
[style*="background-color: white"],
[style*="background: rgb(255, 255, 255)"],
[style*="background: #ffffff"] {
    background-color: var(--color-surface) !important;
}

[style*="color: rgb(0, 0, 0)"],
[style*="color: #000000"],
[style*="color: black"] {
    color: var(--color-text-main) !important;
}